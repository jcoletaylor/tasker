---
name: <%= @module_path ? "#{@module_path}/" : '' %><%= @task_name %>
<% if @module_namespace %>
module_namespace: <%= @module_namespace %>
<% end %>
task_handler_class: <%= @task_handler_class %>
concurrent: <%= @concurrent %>

default_dependent_system: <%= @dependent_system %>
named_steps:
  - fetch_data
  - process_data
  - complete_task

schema:
  type: object
  required:
    - input_id
  properties:
    input_id:
      type: integer

step_templates:
  - name: fetch_data
    description: Fetch required data from dependent system
    handler_class: <%= @module_namespace ? "#{@module_namespace}::" : '' %><%= @task_name %>::StepHandler::FetchDataStepHandler
    handler_config:
      type: api
      url: https://api.example.com/data
      params:
        id: 1

  - name: process_data
    description: Process fetched data
    depends_on_steps:
      - fetch_data
    handler_class: <%= @module_namespace ? "#{@module_namespace}::" : '' %><%= @task_name %>::StepHandler::ProcessDataStepHandler

  - name: complete_task
    description: Complete the task with processed data
    depends_on_step: process_data
    handler_class: <%= @module_namespace ? "#{@module_namespace}::" : '' %><%= @task_name %>::StepHandler::CompleteTaskStepHandler
