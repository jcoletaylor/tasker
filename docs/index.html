<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.37
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<p><a href="https://github.com/jcoletaylor/tasker/actions/workflows/main.yml"><img src="https" alt="//github.com/jcoletaylor/tasker/actions/workflows/main.yml/badge.svg:CI"></a> <img src="https" alt="//img.shields.io/github/license/jcoletaylor/tasker:GitHub"> <img src="https" alt="//img.shields.io/github/v/release/jcoletaylor/tasker?color=blue&amp;sort=semver:GitHub"> release (latest SemVer)</p>

<h1 id="label-Tasker-3A+Queable+Multi-Step+Tasks+Made+Easy-ish">Tasker: Queable Multi-Step Tasks Made Easy-ish</h1>

<p>Designed to make developing queuable multi-step tasks easier to reason about</p>

<h2 id="label-Getting+Started+with+Tasker">Getting Started with Tasker</h2>

<p>This guide will walk you through the fundamentals of using Tasker to build complex task workflows with retries, error handling, and concurrency.</p>

<h2 id="label-Table+of+Contents">Table of Contents</h2>
<ul><li>
<p><a href="#tasker-queable-multi-step-tasks-made-easy-ish">Tasker: Queable Multi-Step Tasks Made Easy-ish</a></p>
</li><li>
<p><a href="#getting-started-with-tasker">Getting Started with Tasker</a></p>
</li><li>
<p><a href="#table-of-contents">Table of Contents</a></p>
</li><li>
<p><a href="#introduction">Introduction</a></p>
</li><li>
<p><a href="#installation">Installation</a></p>
</li><li>
<p><a href="#core-concepts">Core Concepts</a></p>
</li><li>
<p><a href="#creating-task-handlers">Creating Task Handlers</a></p>
<ul><li>
<p><a href="#task-handler-yaml-configuration">Task Handler YAML Configuration</a></p>
</li><li>
<p><a href="#using-the-task-handler">Using the Task Handler</a></p>
</li></ul>
</li><li>
<p><a href="#step-handlers">Step Handlers</a></p>
<ul><li>
<p><a href="#key-methods">Key Methods</a></p>
</li></ul>
</li><li>
<p><a href="#api-step-handlers">API Step Handlers</a></p>
<ul><li>
<p><a href="#api-step-handler-configuration">API Step Handler Configuration</a></p>
</li></ul>
</li><li>
<p><a href="#defining-step-dependencies">Defining Step Dependencies</a></p>
<ul><li>
<p><a href="#how-dependencies-work">How Dependencies Work</a></p>
</li></ul>
</li><li>
<p><a href="#customizing-behavior">Customizing Behavior</a></p>
<ul><li>
<p>API Calls with <code>process</code><a href="#separating-api-calls-with-process"></a></p>
</li><li>
<p><a href="#processing-results">Processing Results</a></p>
</li><li>
<p><a href="#customizing-result-processing">Customizing Result Processing</a></p>
</li><li>
<p><a href="#accessing-data-from-previous-steps">Accessing Data from Previous Steps</a></p>
</li></ul>
</li><li>
<p><a href="#authentication--authorization">Authentication &amp; Authorization</a></p>
<ul><li>
<p><a href="#key-features">Key Features</a></p>
</li><li>
<p><a href="#quick-start">Quick Start</a></p>
</li><li>
<p><a href="#generators">Generators</a></p>
</li><li>
<p><a href="#graphql-security">GraphQL Security</a></p>
</li><li>
<p><a href="#complete-documentation">Complete Documentation</a></p>
</li></ul>
</li><li>
<p><a href="#best-practices">Best Practices</a></p>
</li><li>
<p><a href="#event-system--custom-integrations">Event System &amp; Custom Integrations</a></p>
<ul><li>
<p><a href="#quick-start-with-event-subscribers">Quick Start with Event Subscribers</a></p>
</li><li>
<p><a href="#example-custom-events-in-step-handlers">Example: Custom Events in Step Handlers</a></p>
</li><li>
<p><a href="#example-custom-subscriber">Example Custom Subscriber</a></p>
</li></ul>
</li><li>
<p><a href="#telemetry-and-observability">Telemetry and Observability</a></p>
</li><li>
<p><a href="#documentation">Documentation</a></p>
<ul><li>
<p><a href="#developer-resources">Developer Resources</a></p>
</li><li>
<p><a href="#additional-resources">Additional Resources</a></p>
</li></ul>
</li><li>
<p><a href="#scheduling-tasks">Scheduling Tasks</a></p>
</li><li>
<p><a href="#dependencies">Dependencies</a></p>
</li><li>
<p><a href="#development">Development</a></p>
</li><li>
<p><a href="#gratitude">Gratitude</a></p>
</li><li>
<p><a href="#license">License</a></p>
</li></ul>

<h2 id="label-Introduction">Introduction</h2>

<p>Tasker is a Rails engine that makes it easier to build complex workflows by organizing them into discrete steps that can be executed, retried, and tracked. It’s designed for processes that:</p>
<ul><li>
<p>Involve multiple steps</p>
</li><li>
<p>May need retries with exponential backoff</p>
</li><li>
<p>Have dependencies between steps</p>
</li><li>
<p>Should be queued and processed asynchronously</p>
</li><li>
<p>Need visibility into progress and errors</p>
</li></ul>

<h2 id="label-Installation">Installation</h2>

<p>Add Tasker to your Rails app’s <code>Gemfile</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_source'>source</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>https://rubygems.pkg.github.com/jcoletaylor</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>do</span>
  <span class='id identifier rubyid_gem'>gem</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tasker</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>~&gt; 2.0.0</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Install and run the migrations:</p>

<pre class="code ruby"><code class="ruby">bundle exec rails tasker:install:migrations
bundle exec rails db:migrate
</code></pre>

<p>Mount the engine in your routes:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># config/routes.rb
</span><span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_draw'>draw</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_mount'>mount</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Engine.html" title="Tasker::Engine (class)">Engine</a></span></span><span class='comma'>,</span> <span class='label'>at:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/tasker</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='label'>as:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>tasker</span><span class='tstring_end'>&#39;</span></span>
<span class='kw'>end</span>
</code></pre>

<p>Set up the initial configuration:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_bundle'>bundle</span> <span class='id identifier rubyid_exec'>exec</span> <span class='id identifier rubyid_rails'>rails</span> <span class='label'>tasker:</span><span class='id identifier rubyid_setup'>setup</span>
</code></pre>

<h2 id="label-Core+Concepts">Core Concepts</h2>

<p>Tasker is built around a few key concepts:</p>
<ul><li>
<p><strong>Tasks</strong>: The overall process to be executed</p>
</li><li>
<p><strong>TaskHandlers</strong>: Classes that define and coordinate the steps in a task</p>
</li><li>
<p><strong>Steps</strong>: Individual units of work within a task</p>
</li><li>
<p><strong>StepHandlers</strong>: Classes that implement the logic for each step</p>
</li><li>
<p><strong>Dependencies</strong>: Relationships between steps that determine execution order</p>
</li><li>
<p><strong>Retry Logic</strong>: Built-in mechanisms for retrying failed steps</p>
</li></ul>

<h2 id="label-Creating+Task+Handlers">Creating Task Handlers</h2>

<p>Task handlers define the workflow for a specific type of task. The easiest way to create a task handler is using the built-in generator:</p>

<pre class="code ruby"><code class="ruby">rails generate tasker:task_handler OrderProcess
</code></pre>

<p>This creates:</p>
<ul><li>
<p>A task handler class in <code>app/tasks/order_process.rb</code></p>
</li><li>
<p>A YAML configuration in <code>config/tasker/tasks/order_process.yaml</code></p>
</li><li>
<p>A spec file in <code>spec/tasks/order_process_spec.rb</code></p>
</li></ul>

<h3 id="label-Task+Handler+YAML+Configuration">Task Handler YAML Configuration</h3>

<p>The YAML configuration defines the task handler, its steps, and their relationships:</p>

<pre class="code ruby"><code class="ruby">---
name: order_process
module_namespace: # Optional namespace
task_handler_class: OrderProcess
concurrent: true # Whether steps can run concurrently

schema: # JSON Schema for validating task context
  type: object
  required:
    - order_id
  properties:
    order_id:
      type: integer

step_templates:
  - name: fetch_order
    description: Fetch order details from database
    handler_class: OrderProcess::StepHandler::FetchOrderHandler

  - name: validate_items
    description: Validate order items are available
    depends_on_step: fetch_order
    handler_class: OrderProcess::StepHandler::ValidateItemsHandler

  - name: process_payment
    description: Process payment for the order
    depends_on_step: validate_items
    handler_class: OrderProcess::StepHandler::ProcessPaymentHandler
    # Retry configuration
    default_retryable: true
    default_retry_limit: 3

  - name: update_inventory
    description: Update inventory levels
    depends_on_step: process_payment
    handler_class: OrderProcess::StepHandler::UpdateInventoryHandler

  - name: send_confirmation
    description: Send confirmation email
    depends_on_step: update_inventory
    handler_class: OrderProcess::StepHandler::SendConfirmationHandler
</code></pre>

<h3 id="label-Using+the+Task+Handler">Using the Task Handler</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># Create a task request
</span><span class='id identifier rubyid_task_request'>task_request</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Types.html" title="Tasker::Types (module)">Types</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Types/TaskRequest.html" title="Tasker::Types::TaskRequest (class)">TaskRequest</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_process</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>context:</span> <span class='lbrace'>{</span> <span class='label'>order_id:</span> <span class='int'>12345</span> <span class='rbrace'>}</span>
<span class='rparen'>)</span>

<span class='comment'># Initialize the task
</span><span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/HandlerFactory.html" title="Tasker::HandlerFactory (class)">HandlerFactory</a></span></span><span class='period'>.</span><span class='id identifier rubyid_instance'>instance</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_process</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span><span class='period'>.</span><span class='id identifier rubyid_initialize_task!'>initialize_task!</span><span class='lparen'>(</span><span class='id identifier rubyid_task_request'>task_request</span><span class='rparen'>)</span>

<span class='comment'># The task is now queued for processing
</span></code></pre>

<h2 id="label-Step+Handlers">Step Handlers</h2>

<p>Step handlers implement the actual logic for each step in a task. They must define a <code>process</code> method that performs the work and returns the results:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>OrderProcess</span>
  <span class='kw'>module</span> <span class='const'>StepHandler</span>
    <span class='kw'>class</span> <span class='const'>FetchOrderHandler</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Base.html" title="Tasker::StepHandler::Base (class)">Base</a></span></span>
      <span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='comma'>,</span> <span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
        <span class='comment'># Get data from the task context
</span>        <span class='id identifier rubyid_order_id'>order_id</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

        <span class='comment'># Perform the work
</span>        <span class='id identifier rubyid_order'>order</span> <span class='op'>=</span> <span class='const'>Order</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_order_id'>order_id</span><span class='rparen'>)</span>

        <span class='comment'># Return results - they will be stored in step.results automatically
</span>        <span class='lbrace'>{</span> <span class='label'>order:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Key+Methods">Key Methods</h3>
<ul><li>
<p><code>process(task, sequence, step)</code>: Required method that executes the step’s business logic and returns results</p>
</li><li>
<p><code>task</code>: The Tasker::Task instance being processed</p>
</li><li>
<p><code>sequence</code>: The Tasker::Types::StepSequence containing all steps</p>
</li><li>
<p><code>step</code>: The current Tasker::WorkflowStep being executed</p>
</li><li>
<p><strong>Return value</strong>: The results to be stored in <code>step.results</code> (handled automatically)</p>
</li><li>
<p><code>process_results(step, process_output, initial_results)</code>: Optional method to customize result storage</p>
</li><li>
<p><code>step</code>: The current Tasker::WorkflowStep being executed</p>
</li><li>
<p><code>process_output</code>: The return value from your <code>process()</code> method</p>
</li><li>
<p><code>initial_results</code>: The value of <code>step.results</code> before <code>process()</code> was called</p>
</li><li>
<p><strong>Override this</strong>: When you need to transform or format results before storing them</p>
</li></ul>

<p><strong>Important</strong>: Step lifecycle events are <strong>automatically published</strong> around your <code>process</code> method: - <code>step_started</code> event fired before your method executes - <code>step_completed</code> event fired after successful completion - <code>step_failed</code> event fired if an exception occurs</p>

<p>Simply implement your business logic in <code>process()</code> and return your results - event publishing and result storage happen automatically!</p>

<p>⚠️ <strong>Never override the <code>handle()</code> method</strong> - it’s framework-only code that coordinates event publishing and calls your <code>process()</code> method.</p>

<h2 id="label-API+Step+Handlers">API Step Handlers</h2>

<p>Tasker includes a special base class for API-based steps that provides:</p>
<ul><li>
<p>HTTP request handling via Faraday</p>
</li><li>
<p>Automatic retries with exponential backoff</p>
</li><li>
<p>Support for rate limiting and server-requested backoff</p>
</li><li>
<p>Response processing helpers</p>
</li></ul>

<p>To create an API step handler, inherit from <code>Tasker::StepHandler::Api</code> and implement the <code>process</code> method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>FetchOrderStatusHandler</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Api.html" title="Tasker::StepHandler::Api (class)">Api</a></span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid__sequence'>_sequence</span><span class='comma'>,</span> <span class='id identifier rubyid__step'>_step</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_order_id'>order_id</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='comment'># Make the API call - returns Faraday::Response
</span>    <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/orders/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_order_id'>order_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>/status</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Override to customize how the API response is stored
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_process_results'>process_results</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='comma'>,</span> <span class='id identifier rubyid_initial_results'>initial_results</span><span class='rparen'>)</span>
    <span class='comment'># Extract and transform the API response data
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='op'>==</span> <span class='int'>200</span>
      <span class='id identifier rubyid_response_data'>response_data</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_process_output'>process_output</span><span class='period'>.</span><span class='id identifier rubyid_body'>body</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='label'>status:</span> <span class='id identifier rubyid_response_data'>response_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>status</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>last_updated:</span> <span class='id identifier rubyid_response_data'>response_data</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>updated_at</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
        <span class='label'>success:</span> <span class='kw'>true</span>
      <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span>
        <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
        <span class='label'>error:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>API returned status </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_process_output'>process_output</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='rbrace'>}</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p><strong>Key Points:</strong> - ✅ <strong>Always implement <code>process()</code></strong> - This makes your HTTP request - ✅ <strong>Optionally override <code>process_results()</code></strong> - For custom response processing - ⚠️ <strong>Never override <code>handle()</code></strong> - Framework-only method for event publishing and coordination</p>

<h3 id="label-API+Step+Handler+Configuration">API Step Handler Configuration</h3>

<p>API Step Handlers can be configured in the YAML:</p>

<pre class="code ruby"><code class="ruby">- name: fetch_order_status
  handler_class: OrderProcess::StepHandler::FetchOrderStatusHandler
  handler_config:
    type: api
    url: https://api.example.com
    params:
      api_key: ${API_KEY}
    headers:
      Accept: application/json
    retry_delay: 1.0
    enable_exponential_backoff: true
</code></pre>

<h2 id="label-Defining+Step+Dependencies">Defining Step Dependencies</h2>

<p>Steps are executed in the order defined by their dependencies. There are two ways to define dependencies:</p>
<ol><li>
<p><code>depends_on_step</code>: Single dependency on another step</p>
</li><li>
<p><code>depends_on_steps</code>: Multiple dependencies on other steps</p>
</li></ol>

<pre class="code ruby"><code class="ruby">- name: send_notification
  description: Send notification about processed order
  # This step will only run after both payment and inventory steps complete
  depends_on_steps:
    - process_payment
    - update_inventory
  handler_class: OrderProcess::StepHandler::SendNotificationHandler
</code></pre>

<h3 id="label-How+Dependencies+Work">How Dependencies Work</h3>
<ul><li>
<p>Steps with no dependencies start first (root steps)</p>
</li><li>
<p>When a step completes, Tasker checks for steps that depend on it</p>
</li><li>
<p>When all dependencies for a step are complete, it becomes eligible for execution</p>
</li><li>
<p>If concurrent processing is enabled, eligible steps run in parallel</p>
</li><li>
<p>The task completes when all steps are processed</p>
</li></ul>

<h2 id="label-Customizing+Behavior">Customizing Behavior</h2>

<p>There are several ways to customize Tasker’s behavior using the <code>process</code> method:</p>

<h3 id="label-Separating+API+Calls+with+process">Separating API Calls with <code>process</code></h3>

<p>For API step handlers, the <code>process</code> method is the developer extension point for making HTTP requests:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>CartFetchStepHandler</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Api.html" title="Tasker::StepHandler::Api (class)">Api</a></span></span>
  <span class='id identifier rubyid_include'>include</span> <span class='const'>ApiTask</span><span class='op'>::</span><span class='const'>ApiUtils</span>

  <span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid__sequence'>_sequence</span><span class='comma'>,</span> <span class='id identifier rubyid__step'>_step</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_cart_id'>cart_id</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cart_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_connection'>connection</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/carts/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_cart_id'>cart_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Override process_results to do custom response processing
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_process_results'>process_results</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='comma'>,</span> <span class='id identifier rubyid_initial_results'>initial_results</span><span class='rparen'>)</span>
    <span class='comment'># Extract and process the cart data from the API response
</span>    <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_get_from_results'>get_from_results</span><span class='lparen'>(</span><span class='id identifier rubyid_process_output'>process_output</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cart</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Processing+Results">Processing Results</h3>

<p>For regular step handlers, implement your business logic in the <code>process</code> method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>module</span> <span class='const'>OrderProcess</span>
  <span class='kw'>module</span> <span class='const'>StepHandler</span>
    <span class='kw'>class</span> <span class='const'>FetchOrderHandler</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Base.html" title="Tasker::StepHandler::Base (class)">Base</a></span></span>
      <span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='comma'>,</span> <span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
        <span class='comment'># Get data from the task context
</span>        <span class='id identifier rubyid_order_id'>order_id</span> <span class='op'>=</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

        <span class='comment'># Perform the work
</span>        <span class='id identifier rubyid_order'>order</span> <span class='op'>=</span> <span class='const'>Order</span><span class='period'>.</span><span class='id identifier rubyid_find'>find</span><span class='lparen'>(</span><span class='id identifier rubyid_order_id'>order_id</span><span class='rparen'>)</span>

        <span class='comment'># Return results - they will be stored in step.results automatically
</span>        <span class='lbrace'>{</span> <span class='label'>order:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_as_json'>as_json</span> <span class='rbrace'>}</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Customizing+Result+Processing">Customizing Result Processing</h3>

<p>If you need to customize how the return value from <code>process()</code> gets stored in <code>step.results</code>, you can override the <code>process_results()</code> method:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>DataTransformHandler</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Base.html" title="Tasker::StepHandler::Base (class)">Base</a></span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='comma'>,</span> <span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
    <span class='comment'># Your business logic that returns raw data
</span>    <span class='id identifier rubyid_raw_data'>raw_data</span> <span class='op'>=</span> <span class='id identifier rubyid_fetch_external_data'>fetch_external_data</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raw_data'>raw_data</span>  <span class='comment'># Return raw data
</span>  <span class='kw'>end</span>

  <span class='comment'># Override to customize how results are stored
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_process_results'>process_results</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='comma'>,</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='comma'>,</span> <span class='id identifier rubyid_initial_results'>initial_results</span><span class='rparen'>)</span>
    <span class='comment'># Transform the raw output before storing
</span>    <span class='id identifier rubyid_transformed_data'>transformed_data</span> <span class='op'>=</span> <span class='lbrace'>{</span>
      <span class='label'>processed_at:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='comma'>,</span>
      <span class='label'>data:</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='period'>.</span><span class='id identifier rubyid_transform_keys'>transform_keys</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:underscore</span><span class='rparen'>)</span><span class='comma'>,</span>
      <span class='label'>record_count:</span> <span class='id identifier rubyid_process_output'>process_output</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
    <span class='rbrace'>}</span>

    <span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span> <span class='op'>=</span> <span class='id identifier rubyid_transformed_data'>transformed_data</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p><strong>Key Points:</strong> - The framework calls <code>process_results(step, process_output, initial_results)</code> after your <code>process()</code> method - <code>process_output</code> is the return value from your <code>process()</code> method - <code>initial_results</code> is the value of <code>step.results</code> before <code>process()</code> was called - If you manually set <code>step.results</code> in your <code>process()</code> method, <code>process_results()</code> respects that and won’t override it</p>

<h3 id="label-Accessing+Data+from+Previous+Steps">Accessing Data from Previous Steps</h3>

<p>Steps often need data from previous steps:</p>

<pre class="code ruby"><code class="ruby"><span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid__task'>_task</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='comma'>,</span> <span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
  <span class='comment'># Find a specific step by name
</span>  <span class='id identifier rubyid_cart_step'>cart_step</span> <span class='op'>=</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='period'>.</span><span class='id identifier rubyid_find_step_by_name'>find_step_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>fetch_cart</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='comment'># Access its results
</span>  <span class='id identifier rubyid_cart_data'>cart_data</span> <span class='op'>=</span> <span class='id identifier rubyid_cart_step'>cart_step</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>cart</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>

  <span class='comment'># Use the data
</span>  <span class='id identifier rubyid_processed_cart'>processed_cart</span> <span class='op'>=</span> <span class='id identifier rubyid_process_cart'>process_cart</span><span class='lparen'>(</span><span class='id identifier rubyid_cart_data'>cart_data</span><span class='rparen'>)</span>

  <span class='comment'># Return your results
</span>  <span class='lbrace'>{</span> <span class='label'>processed:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>cart_data:</span> <span class='id identifier rubyid_processed_cart'>processed_cart</span> <span class='rbrace'>}</span>
<span class='kw'>end</span>
</code></pre>

<h2 id="label-Authentication+-26+Authorization">Authentication &amp; Authorization</h2>

<p>Tasker includes a complete, production-ready authentication and authorization system that provides enterprise-grade security for both REST APIs and GraphQL endpoints. The system is designed to work with any Rails authentication solution while maintaining flexibility and security.</p>

<h3 id="label-Key+Features">Key Features</h3>
<ul><li>
<p><strong>🔐 Provider Agnostic</strong>: Works seamlessly with Devise, JWT, OmniAuth, custom authentication, or no authentication</p>
</li><li>
<p><strong>🛡️ Resource-Based Authorization</strong>: Granular permissions using resource:action patterns (<code>tasker.task:create</code>, <code>tasker.workflow_step:show</code>)</p>
</li><li>
<p><strong>⚡ GraphQL Operation-Level Authorization</strong>: Revolutionary security that automatically maps GraphQL operations to resource permissions</p>
</li><li>
<p><strong>🔄 Automatic Integration</strong>: Authentication and authorization work seamlessly across REST and GraphQL endpoints</p>
</li><li>
<p><strong>🚀 Production-Ready Generators</strong>: Create complete authenticators and authorization coordinators with one command</p>
</li><li>
<p><strong>✅ Zero Breaking Changes</strong>: All features are opt-in and maintain backward compatibility</p>
</li></ul>

<h3 id="label-Quick+Start">Quick Start</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># config/initializers/tasker.rb
</span><span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='period'>.</span><span class='id identifier rubyid_configuration'><span class='object_link'><a href="Tasker.html#configuration-class_method" title="Tasker.configuration (method)">configuration</a></span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_config'>config</span><span class='op'>|</span>
  <span class='id identifier rubyid_config'>config</span><span class='period'>.</span><span class='id identifier rubyid_auth'>auth</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_auth'>auth</span><span class='op'>|</span>
    <span class='comment'># Enable authentication with your custom authenticator
</span>    <span class='id identifier rubyid_auth'>auth</span><span class='period'>.</span><span class='id identifier rubyid_authentication_enabled'>authentication_enabled</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_auth'>auth</span><span class='period'>.</span><span class='id identifier rubyid_authenticator_class'>authenticator_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YourCustomAuthenticator</span><span class='tstring_end'>&#39;</span></span>

    <span class='comment'># Enable resource-based authorization
</span>    <span class='id identifier rubyid_auth'>auth</span><span class='period'>.</span><span class='id identifier rubyid_authorization_enabled'>authorization_enabled</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id identifier rubyid_auth'>auth</span><span class='period'>.</span><span class='id identifier rubyid_authorization_coordinator_class'>authorization_coordinator_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>YourAuthorizationCoordinator</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_auth'>auth</span><span class='period'>.</span><span class='id identifier rubyid_user_class'>user_class</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>User</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Generators">Generators</h3>

<p>Generate production-ready authenticators for popular authentication systems:</p>

<pre class="code ruby"><code class="ruby"># JWT authenticator with comprehensive security features
rails generate tasker:authenticator CompanyJWT --type=jwt

# Devise integration with proper scope handling
rails generate tasker:authenticator AdminAuth --type=devise --user-class=Admin

# API token authenticator with header fallback
rails generate tasker:authenticator ApiAuth --type=api_token

# OmniAuth integration with session management
rails generate tasker:authenticator SocialAuth --type=omniauth

# Authorization coordinator with resource-based permissions
rails generate tasker:authorization_coordinator CompanyAuth
</code></pre>

<h3 id="label-GraphQL+Security">GraphQL Security</h3>

<p>The system provides revolutionary GraphQL authorization that automatically maps operations to permissions:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># GraphQL query automatically requires tasker.task:index permission
</span><span class='id identifier rubyid_query'>query</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_tasks'>tasks</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_taskId'>taskId</span> <span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>

<span class='comment'># GraphQL mutation automatically requires tasker.task:create permission
</span><span class='id identifier rubyid_mutation'>mutation</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_createTask'>createTask</span><span class='lparen'>(</span><span class='label'>input:</span> <span class='lbrace'>{</span> <span class='label'>name:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>New Task</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_taskId'>taskId</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>

<span class='comment'># Mixed operations check all required permissions
</span><span class='id identifier rubyid_query'>query</span> <span class='lbrace'>{</span>
  <span class='id identifier rubyid_tasks'>tasks</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_taskId'>taskId</span> <span class='rbrace'>}</span>           <span class='comment'># Requires: tasker.task:index
</span>  <span class='id identifier rubyid_workflowSteps'>workflowSteps</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_stepId'>stepId</span> <span class='rbrace'>}</span>   <span class='comment'># Requires: tasker.workflow_step:index
</span><span class='rbrace'>}</span>
</code></pre>

<h3 id="label-Complete+Documentation">Complete Documentation</h3>

<p>For comprehensive documentation including quick start guides, custom authenticator examples, authorization patterns, GraphQL security details, production best practices, and testing strategies:</p>

<p><strong>📖 See &amp; Authorization Guide[docs/AUTH.md]</strong></p>

<h2 id="label-Best+Practices">Best Practices</h2>
<ol><li>
<p><strong>Keep steps focused</strong>: Each step should do one thing well</p>
</li><li>
<p><strong>Use meaningful step names</strong>: Names should clearly indicate what the step does</p>
</li><li>
<p><strong>Store useful data in step results</strong>: Include enough information for dependent steps</p>
</li><li>
<p><strong>Handle errors gracefully</strong>: Use begin/rescue and set appropriate error information</p>
</li><li>
<p><strong>Configure retries appropriately</strong>: Set retry limits based on the reliability of the operation</p>
</li><li>
<p><strong>Use API step handlers for external services</strong>: Take advantage of built-in retry and backoff</p>
</li><li>
<p><strong>Test with mocked dependencies</strong>: Create tests that verify step behavior in isolation</p>
</li><li>
<p><strong>Document step dependencies</strong>: Make it clear why steps depend on each other</p>
</li></ol>

<pre class="code ruby"><code class="ruby"><span class='comment'># Example of good error handling
</span><span class='kw'>def</span> <span class='id identifier rubyid_process'>process</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='comma'>,</span> <span class='id identifier rubyid_sequence'>sequence</span><span class='comma'>,</span> <span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='comment'># Attempt the operation
</span>    <span class='id identifier rubyid_result'>result</span> <span class='op'>=</span> <span class='id identifier rubyid_perform_complex_operation'>perform_complex_operation</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_context'>context</span><span class='rparen'>)</span>
    <span class='lbrace'>{</span> <span class='label'>success:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>data:</span> <span class='id identifier rubyid_result'>result</span> <span class='rbrace'>}</span>
  <span class='kw'>rescue</span> <span class='const'>StandardError</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
    <span class='comment'># Return error information - framework will still publish step_failed event
</span>    <span class='lbrace'>{</span>
      <span class='label'>success:</span> <span class='kw'>false</span><span class='comma'>,</span>
      <span class='label'>error:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='comma'>,</span>
      <span class='label'>error_type:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span>
      <span class='label'>backtrace:</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
    <span class='comment'># Re-raise to trigger retry logic
</span>    <span class='id identifier rubyid_raise'>raise</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h2 id="label-Event+System+-26+Custom+Integrations">Event System &amp; Custom Integrations</h2>

<p>Tasker features a comprehensive event-driven architecture that provides deep insights into task execution and enables powerful integrations. The event system includes:</p>
<ul><li>
<p><strong>Complete Event Catalog</strong> - Discover all available events with <code>Tasker::Events.catalog</code> and <code>Tasker::Events.complete_catalog</code></p>
</li><li>
<p><strong>Custom Business Events</strong> - Define and publish custom events from step handlers for business logic observability</p>
</li><li>
<p><strong>Custom Event Subscribers</strong> - Create integrations with external services (Sentry, PagerDuty, Slack)</p>
</li><li>
<p><strong>Subscriber Generator</strong> - <code>rails generate tasker:subscriber</code> creates subscribers with automatic method routing</p>
</li><li>
<p><strong>Event Discovery</strong> - Search and filter events by namespace, name, or description</p>
</li><li>
<p><strong>Production-Ready Observability</strong> - OpenTelemetry integration with comprehensive telemetry</p>
</li><li>
<p><strong>Living Documentation</strong> - Real-world integration examples with comprehensive test coverage</p>
</li></ul>

<h3 id="label-Quick+Start+with+Event+Subscribers">Quick Start with Event Subscribers</h3>

<pre class="code ruby"><code class="ruby"># Generate a subscriber for critical alerts
rails generate tasker:subscriber pager_duty --events task.failed step.failed

# Generate a notification subscriber
rails generate tasker:subscriber notification --events task.completed task.failed

# Generate a specialized metrics subscriber with helper methods
rails generate tasker:subscriber metrics --metrics --events task.completed task.failed step.completed step.failed

# Generate authenticators for different authentication systems
rails generate tasker:authenticator CompanyJWT --type=jwt
rails generate tasker:authenticator AdminAuth --type=devise --user-class=Admin
rails generate tasker:authenticator ApiAuth --type=api_token
</code></pre>

<h3 id="label-Example-3A+Custom+Events+in+Step+Handlers">Example: Custom Events in Step Handlers</h3>

<pre class="code ruby"><code class="ruby"><span class='comment'># Register custom business events
</span><span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Events.html" title="Tasker::Events (module)">Events</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register_custom_event'><span class='object_link'><a href="Tasker/Events.html#register_custom_event-class_method" title="Tasker::Events.register_custom_event (method)">register_custom_event</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order.fulfilled</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span>
  <span class='label'>description:</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Order has been fulfilled and shipped</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

<span class='comment'># Publish from step handlers
</span><span class='kw'>class</span> <span class='const'>OrderFulfillmentStep</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler.html" title="Tasker::StepHandler (module)">StepHandler</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/StepHandler/Base.html" title="Tasker::StepHandler::Base (class)">Base</a></span></span>
  <span class='kw'>def</span> <span class='id identifier rubyid_handle'>handle</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_order'>order</span> <span class='op'>=</span> <span class='id identifier rubyid_fulfill_order'>fulfill_order</span><span class='lparen'>(</span><span class='id identifier rubyid_step'>step</span><span class='period'>.</span><span class='id identifier rubyid_inputs'>inputs</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order_id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='comment'># Publish custom business event
</span>    <span class='id identifier rubyid_publish_custom_event'>publish_custom_event</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order.fulfilled</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span>
      <span class='label'>order_id:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
      <span class='label'>customer_id:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_customer_id'>customer_id</span><span class='comma'>,</span>
      <span class='label'>total_amount:</span> <span class='id identifier rubyid_order'>order</span><span class='period'>.</span><span class='id identifier rubyid_total'>total</span>
    <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<h3 id="label-Example+Custom+Subscriber">Example Custom Subscriber</h3>

<pre class="code ruby"><code class="ruby"><span class='kw'>class</span> <span class='const'>NotificationSubscriber</span> <span class='op'>&lt;</span> <span class='const'><span class='object_link'><a href="Tasker.html" title="Tasker (module)">Tasker</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Events.html" title="Tasker::Events (module)">Events</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Events/Subscribers.html" title="Tasker::Events::Subscribers (module)">Subscribers</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Tasker/Events/Subscribers/BaseSubscriber.html" title="Tasker::Events::Subscribers::BaseSubscriber (class)">BaseSubscriber</a></span></span>
  <span class='comment'># Subscribe to system and custom events
</span>  <span class='id identifier rubyid_subscribe_to'>subscribe_to</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>task.completed</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>task.failed</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>order.fulfilled</span><span class='tstring_end'>&#39;</span></span>

  <span class='comment'># Handle task completion events
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_handle_task_completed'>handle_task_completed</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_task_id'>task_id</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_get'>safe_get</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='symbol'>:task_id</span><span class='rparen'>)</span>
    <span class='const'>NotificationService</span><span class='period'>.</span><span class='id identifier rubyid_send_success_email'>send_success_email</span><span class='lparen'>(</span><span class='label'>task_id:</span> <span class='id identifier rubyid_task_id'>task_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Handle failure events
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_handle_task_failed'>handle_task_failed</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_task_id'>task_id</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_get'>safe_get</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='symbol'>:task_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_error_message'>error_message</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_get'>safe_get</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='symbol'>:error_message</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Unknown error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='const'>AlertService</span><span class='period'>.</span><span class='id identifier rubyid_send_failure_alert'>send_failure_alert</span><span class='lparen'>(</span><span class='label'>task_id:</span> <span class='id identifier rubyid_task_id'>task_id</span><span class='comma'>,</span> <span class='label'>error:</span> <span class='id identifier rubyid_error_message'>error_message</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># Handle custom business events
</span>  <span class='kw'>def</span> <span class='id identifier rubyid_handle_order_fulfilled'>handle_order_fulfilled</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_order_id'>order_id</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_get'>safe_get</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='symbol'>:order_id</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_customer_id'>customer_id</span> <span class='op'>=</span> <span class='id identifier rubyid_safe_get'>safe_get</span><span class='lparen'>(</span><span class='id identifier rubyid_event'>event</span><span class='comma'>,</span> <span class='symbol'>:customer_id</span><span class='rparen'>)</span>
    <span class='const'>NotificationService</span><span class='period'>.</span><span class='id identifier rubyid_send_fulfillment_notification'>send_fulfillment_notification</span><span class='lparen'>(</span>
      <span class='label'>order_id:</span> <span class='id identifier rubyid_order_id'>order_id</span><span class='comma'>,</span>
      <span class='label'>customer_id:</span> <span class='id identifier rubyid_customer_id'>customer_id</span>
    <span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>
</code></pre>

<p>For complete documentation on the event system, subscriber creation, and integration examples, see <a href="docs/EVENT_SYSTEM_md.html">docs/EVENT_SYSTEM.md</a>.</p>

<h2 id="label-Telemetry+and+Observability">Telemetry and Observability</h2>

<p>Tasker includes comprehensive telemetry capabilities to provide insights into task execution flow and performance:</p>
<ul><li>
<p><strong>Built-in OpenTelemetry integration</strong> for compatibility with tools like Jaeger, Zipkin, and Honeycomb</p>
</li><li>
<p><strong>Standardized event naming</strong> for consistent observability across task and step operations</p>
</li><li>
<p><strong>Automatic span creation</strong> with proper parent-child relationships for complex workflows</p>
</li><li>
<p><strong>Sensitive data filtering</strong> to ensure security and privacy of telemetry data</p>
</li><li>
<p><strong>Configurable service naming</strong> to customize how traces appear in your observability tools</p>
</li><li>
<p><strong>Detailed event lifecycle tracking</strong> with standard events for all task and step operations</p>
</li></ul>

<p>For complete documentation on telemetry features, configuration options, and best practices, see <a href="docs/TELEMETRY_md.html">docs/TELEMETRY.md</a>.</p>

<h2 id="label-Documentation">Documentation</h2>

<h3 id="label-Developer+Resources">Developer Resources</h3>
<ul><li>
<p><strong>Guide[docs/DEVELOPER_GUIDE.md]</strong> - Comprehensive guide covering task handlers, step handlers, event subscribers, and YAML configuration</p>
</li><li>
<p><strong>Guide[docs/AUTH.md]</strong> - Complete authentication system documentation with JWT, Devise, and custom authenticator examples</p>
</li><li>
<p><strong>System[docs/EVENT_SYSTEM.md]</strong> - Complete event system documentation with integration examples</p>
</li><li>
<p><strong>&amp; Observability[docs/TELEMETRY.md]</strong> - OpenTelemetry integration and custom monitoring setup</p>
</li><li>
<p><strong>Overview[docs/OVERVIEW.md]</strong> - Architecture overview and configuration examples</p>
</li><li>
<p><strong>Execution[docs/FLOW_CHART.md]</strong> - Visual guide to workflow execution and retry logic</p>
</li></ul>

<h3 id="label-Additional+Resources">Additional Resources</h3>
<ul><li>
<p><strong>Tasker[docs/WHY.md]</strong> - Background and motivation for building Tasker</p>
</li><li>
<p><strong>Diagrams[docs/TASK_DIAGRAM.md]</strong> - Visual representation of task workflows</p>
</li></ul>

<h2 id="label-Scheduling+Tasks">Scheduling Tasks</h2>

<p>Tasker does not directly manage scheduling recurring tasks. There are a variety of strategies that already exist in the Rails ecosystem for accomplishing this. <a href="https://github.com/javan/whenever">Javan’s Whenever gem</a> is one of the most popular, and is very battle-tested.</p>

<h2 id="label-Dependencies">Dependencies</h2>
<ul><li>
<p>Ruby version - 3.2.2</p>
</li><li>
<p>System dependencies - Postgres, Redis, and Sidekiq (in development and test environments)</p>
</li></ul>

<h2 id="label-Development">Development</h2>
<ul><li>
<p>Database - <code>bundle exec rake db:schema:load</code></p>
</li><li>
<p>How to run the test suite - <code>bundle exec rspec spec</code></p>
</li><li>
<p>Lint: <code>bundle exec rubocop</code></p>
</li></ul>

<h2 id="label-Gratitude">Gratitude</h2>

<p>Flowchart PNG by <a href="https://www.flaticon.com/authors/xnimrodx">xnimrodx</a> from <a href="https://www.flaticon.com/">Flaticon</a></p>

<h2 id="label-License">License</h2>

<p>The gem is available as open source under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>
</div></div>

      <div id="footer">
  Generated on Sat Jun  7 22:52:44 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.2.4).
</div>

    </div>
  </body>
</html>